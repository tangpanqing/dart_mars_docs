(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{394:function(e,a,t){"use strict";t.r(a);var s=t(44),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"如何使用路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用路由"}},[e._v("#")]),e._v(" 如何使用路由")]),e._v(" "),t("p",[e._v("路由的作用是解析请求路径，并且转发到相应的内部程序进行处理。")]),e._v(" "),t("p",[e._v("在lib/config/route.dart文件中，我们可以定义路由信息。")]),e._v(" "),t("p",[e._v("当你创建完项目后，打开该文件，我们可以看到相关的示例。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("import '../bootstrap/helper/RouteHelper.dart';\nimport '../app/controller/HomeController.dart' as app_controller_HomeController;\n\n///\n/// don't modify this file yourself, this file content will be replace by DartMars\n///\n/// for more infomation, see doc about Route\n///\n/// last replace time 2021-06-19 10:20:26.386828\n///\nvoid configRoute() {\n  RouteHelper.add('GET', '/', app_controller_HomeController.HomeController.index);\n  RouteHelper.add('GET', '/user', app_controller_HomeController.HomeController.user);\n  RouteHelper.add('GET', '/city/:cityName', app_controller_HomeController.HomeController.city);\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br"),t("span",{staticClass:"line-number"},[e._v("15")]),t("br")])]),t("p",[e._v("请注意该文件内的提示：你自己不要修改该文件,该文件的内容会被DartMars自动替换掉")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("don't modify this file yourself, this file content will be replace by DartMars\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"如何添加路由规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何添加路由规则"}},[e._v("#")]),e._v(" 如何添加路由规则")]),e._v(" "),t("p",[e._v("如示例内容所看到的，当引入路由帮助类 RouteHelper 后，你可以通过以下代码，添加路由规则")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RouteHelper.add('GET', '/user', app_controller_HomeController.HomeController.user);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("这里意思是：\n当请求方式是 GET 请求,并且请求路径是 /user 时, 将该请求交给 app_controller_HomeController.HomeController.user 这个控制器方法去处理。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("import '../app/controller/HomeController.dart' as app_controller_HomeController;\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("结合以上导入信息，我们可知 app_controller_HomeController 是 HomeController 类的别名。")]),e._v(" "),t("p",[e._v("HomeController 类的相对路径为 ../app/controller/HomeController.dart")]),e._v(" "),t("h2",{attrs:{id:"如何更改路由请求方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何更改路由请求方式"}},[e._v("#")]),e._v(" 如何更改路由请求方式")]),e._v(" "),t("p",[e._v("上述的例子中，添加路由规则时，所允许的请求方式为 GET ,当然可以改成其他的，比如：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RouteHelper.add('POST', '/user', app_controller_HomeController.HomeController.user);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("改成POST，即表示仅接受POST请求")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RouteHelper.add('POST|GET', '/user', app_controller_HomeController.HomeController.user);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("改成POST|GET，即表示同时接受POST或者GET请求")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RouteHelper.add('*', '/user', app_controller_HomeController.HomeController.user);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("改成*，即表示接受所有请求方式, 即 POST,GET,HEAD,PUT,DELETE,CONNECT,OPTIONS,TRACE")]),e._v(" "),t("h2",{attrs:{id:"如何匹配请求路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何匹配请求路径"}},[e._v("#")]),e._v(" 如何匹配请求路径")]),e._v(" "),t("p",[e._v("如你所见，在下面的代码中")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RouteHelper.add('GET', '/', app_controller_HomeController.HomeController.index);\nRouteHelper.add('GET', '/user', app_controller_HomeController.HomeController.user);\nRouteHelper.add('GET', '/city/:cityName', app_controller_HomeController.HomeController.city);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("第一行, 路由路径为 / ，表示当请求路径为 / 时, 执行该路由定义的操作。")]),e._v(" "),t("p",[e._v("第二行, 路由路径为 /user ，表示当请求路径为 /user 时, 执行该路由定义的操作。")]),e._v(" "),t("p",[e._v("第三行, 路由路径为 /city/:cityName ，表示当请求路径类似于以下时, 均可执行该路由定义的操作。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("/city/beijing   \n/city/shanghai    \n/city/newyork   \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h2",{attrs:{id:"如何接收路由匹配参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何接收路由匹配参数"}},[e._v("#")]),e._v(" 如何接收路由匹配参数")]),e._v(" "),t("p",[e._v("如上述，当路由路径为 /city/:cityName 时，可匹配类似于以下的请求路径")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("/city/beijing   \n/city/shanghai    \n/city/newyork   \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("DartMars 的内部处理逻辑，会将 :city 所对应的信息作为参数，传送给该路由所定义的控制器方法。")]),e._v(" "),t("p",[e._v("打开文件 HomeController.dart 文件，你可以看到相关内容")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("@RouteMeta('/city/:cityName', 'GET')\nstatic void city(Context ctx, String cityName) async {\n    ctx.html(\"hello \" + cityName);\n}\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("其中第二行中的 cityName 即是从请求路径中得到的参数")]),e._v(" "),t("h2",{attrs:{id:"如何自动生成路由配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何自动生成路由配置文件"}},[e._v("#")]),e._v(" 如何自动生成路由配置文件")]),e._v(" "),t("p",[e._v("路由配置文件的规则，可以人工添加，但是我们强烈建议不要这样做。因为项目会越来越大，路由规则会有很多，人工添加容易出错。")]),e._v(" "),t("p",[e._v("DartMars 提供了自动生成路由配置文件的功能，可以很方便的完成该工作。")]),e._v(" "),t("p",[e._v("你需要做的事情是，在写控制器方式时，在前面加上 @RouteMeta, 像这样")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("@RouteMeta('/city/:cityName', 'GET')\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("@RouteMeta 接收两个参数，第一个是路由路径，第二个是请求方式")]),e._v(" "),t("p",[e._v("然后，当你使用下述命令启动项目时，")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("dart pub global run dart_mars --serve dev\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("DartMars会遍历所有lib/app文件夹下，标记有 @RouteMeta 的方法，将全部被写入路由配置文件。")]),e._v(" "),t("p",[e._v("然后命令行提示：路由配置文件已经更新。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("route config file has been updated, see ./lib/config/route.dart \n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("请注意，为了使用 @RouteMeta, 你需要提前导入 RouteMeta.dart")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("import 'package:{package}/bootstrap/meta/RouteMeta.dart';\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("扩展阅读 "),t("a",{attrs:{href:"https://www.baidu.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("在文档中, {package} 是什么意思"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);