(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{390:function(t,e,v){"use strict";v.r(e);var _=v(44),s=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"如何接收请求信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#如何接收请求信息"}},[t._v("#")]),t._v(" 如何接收请求信息")]),t._v(" "),v("p",[t._v("在前面的章节中，我们提到了接收请求信息，并用到了一个基本方法")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("String text = ctx.getString('text');\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[t._v("这是接收一个字符串参数。")]),t._v(" "),v("p",[t._v("实际上接收请求参数的方法，一共有7个，分别如下：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("名称")]),t._v(" "),v("th",[t._v("作用")]),t._v(" "),v("th",[t._v("值例子")]),t._v(" "),v("th",[t._v("默认值")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("getString")]),t._v(" "),v("td",[t._v("获取字符串参数")]),t._v(" "),v("td",[t._v("hello world")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("getInt")]),t._v(" "),v("td",[t._v("获取整形数")]),t._v(" "),v("td",[t._v("11, -10")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("getPositiveInt")]),t._v(" "),v("td",[t._v("获取整形数,正数")]),t._v(" "),v("td",[t._v("11")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("getNegativeInt")]),t._v(" "),v("td",[t._v("获取整形数,负数")]),t._v(" "),v("td",[t._v("-10")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("getDouble")]),t._v(" "),v("td",[t._v("获取浮点数")]),t._v(" "),v("td",[t._v("1.1, -3.1")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("getPositiveDouble")]),t._v(" "),v("td",[t._v("获取浮点数,正数")]),t._v(" "),v("td",[t._v("1.1")]),t._v(" "),v("td",[t._v("0")])]),t._v(" "),v("tr",[v("td",[t._v("getNegativeDouble")]),t._v(" "),v("td",[t._v("获取浮点数,负数")]),t._v(" "),v("td",[t._v("-3.1")]),t._v(" "),v("td",[t._v("0")])])])]),t._v(" "),v("p",[t._v("注意：")]),t._v(" "),v("ol",[v("li",[t._v("如果通过上述方法获取不到相应的参数值，将会返回默认值")]),t._v(" "),v("li",[t._v("Dart里的浮点数，就只有Doulbe类型。没有其他语言里的Float,Double之分")])]),t._v(" "),v("h2",{attrs:{id:"如何修改默认值"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#如何修改默认值"}},[t._v("#")]),t._v(" 如何修改默认值")]),t._v(" "),v("p",[t._v("上述方法，都有默认值。")]),t._v(" "),v("p",[t._v("在一些情况下，我们需要修改默认值，比如客户端查询一个信息列表，通常会传过过来一个分页数量的参数 pageSize ，表示这次请求需要返回多少条数据。")]),t._v(" "),v("p",[t._v("如果写成这样")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("int pageSize = ctx.getPositiveInt('pageSize');\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[t._v("那么它的默认值即是0， 也就是说如果找不到传入的参数 pageSize, 或者传入的参数 pageSize 不是正整数的情况下，返回值将是0，显然这不符合我们的需求。")]),t._v(" "),v("p",[t._v("像下面这样做")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("int pageSize = ctx.getPositiveInt('pageSize', def: 20);\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[t._v("可以多传入一个命名参数def，表示默认值是20，即可符合我们的需求。")]),t._v(" "),v("p",[t._v("其他方法，也有这样的参数，如果需要，可以使用他们。")]),t._v(" "),v("h2",{attrs:{id:"从什么地方获取参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#从什么地方获取参数"}},[t._v("#")]),t._v(" 从什么地方获取参数")]),t._v(" "),v("p",[t._v("一次客户端请求，参数可能来自于以下类型")]),t._v(" "),v("ol",[v("li",[t._v("请求头 header")]),t._v(" "),v("li",[t._v("请求体 body")]),t._v(" "),v("li",[t._v("会话 session")]),t._v(" "),v("li",[t._v("cookie")]),t._v(" "),v("li",[t._v("url")])]),t._v(" "),v("p",[t._v("默认情况下，当我们使用类似于 ctx.getString 方法，获取到的参数，来自于上述所有类型的全部集合。")]),t._v(" "),v("p",[t._v("如果需要指定获取参数的类型，可以使用命名参数 from，例如")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("ctx.getString('text', from: 0);   //从全部参数里找text   \nctx.getString('text', from: 1);   //从请求头header里找   \nctx.getString('text', from: 2);   //从url的查询参数里找   \nctx.getString('text', from: 3);   //从请求体body里找   \nctx.getString('text', from: 4);   //从session里找   \nctx.getString('text', from: 5);   //从cookie里找   \nctx.getString('text', from: 6);   //从自定义参数集合里找  \n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br")])]),v("p",[t._v("其他方法，也有这样的参数，如果需要，可以使用他们。")])])}),[],!1,null,null,null);e.default=s.exports}}]);